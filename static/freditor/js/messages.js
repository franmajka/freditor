"use strict";function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,s=function(){};return{s:s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Message=function(){function e(){_classCallCheck(this,e),this.$element=document.createElement("div"),this.$element.classList.add("message"),this.removing=!1,this.grabbing=!1,e.messagesList.push(this)}return _createClass(e,[{key:"success",set:function(e){if("boolean"!=typeof e)throw new Error("The property receives only boolean");return this.$element.classList.contains("error")||this.$element.classList.contains("success")?(this.$element.classList.contains("success")&&e||this.$element.classList.contains("error")&&!e||this.$element.classList.replace(e?"error":"success",e?"success":"error"),!0):(this.$element.classList.add(e?"success":"error"),!0)}},{key:"textContent",set:function(e){return this.$element.textContent=e,!0}},{key:"grabbing",set:function(t){if("boolean"!=typeof t)throw new Error("The property receives only boolean");return this.$element.classList.contains("grabbing")||this.$element.classList.contains("grab")?(this.$element.classList.contains("grabbing")&&t||this.$element.classList.contains("grab")&&!t||(this.$element.classList.replace(t?"grab":"grabbing",t?"grabbing":"grab"),this.removing&&e.remove(this)),!0):(this.$element.classList.add(t?"grabbing":"grab"),!0)},get:function(){return this.$element.classList.contains("grabbing")}},{key:"HTML",get:function(){return this.$element}}],[{key:"getMessage",value:function(t){return e.messagesList.find((function(e){return e.HTML===t}))}},{key:"delete",value:function(t){var n=e.messagesList.indexOf(t);~n&&e.messagesList.splice(n,1)}},{key:"append",value:function(t){var n=e.messagesListElement,r=t.HTML;n.prepend(r);var s=r.currentStyle||getComputedStyle(r),i=parseInt(s.fontSize);r.style.top=-(r.offsetHeight+i)+"px";var o,a=0,l=_createForOfIteratorHelper(n.children);try{for(l.s();!(o=l.n()).done;){var c=o.value;c.style.top="".concat((parseInt(c.style.top)||0)+r.offsetHeight+i,"px"),a+=c.offsetHeight+i}}catch(e){l.e(e)}finally{l.f()}if(t.timeoutId=setTimeout(e.remove,1e4,t),a>document.documentElement.clientHeight){for(var u=e.getMessage(e.messagesListElement.lastElementChild);u.removing;)if(void 0===(u=e.getMessage(u.HTML.previousElementSibling)))return;e.remove(u)}}},{key:"remove",value:function(t){if(!(!t instanceof e||(t.removing=!0,t.grabbing))){var n=e.messagesListElement,r=t.HTML,s=r.currentStyle||getComputedStyle(r),i=parseInt(s.fontSize),o=[].indexOf.call(n.children,r);if(!~o)return r.remove();var a,l=_createForOfIteratorHelper([].slice.call(n.children,o+1));try{for(l.s();!(a=l.n()).done;){var c=a.value;c.style.top="".concat((parseInt(c.style.top)||0)-(r.offsetHeight+i),"px")}}catch(e){l.e(e)}finally{l.f()}r.style.right="".concat(-(r.offsetWidth+i),"px"),r.ontransitionend=function(){this.remove(),e.delete(t),t.timeoutId&&clearInterval(t.timeoutId)}}}},{key:"messagesListElement",get:function(){if(e.$messagesList)return e.$messagesList;var t=document.querySelector(".messages_list");return t?(e.$messagesList=t,t):((t=document.createElement("div")).classList.add("messages_list"),document.body.appendChild(t),e.$messagesList=t,t)}}]),e}();_defineProperty(Message,"messagesList",[]),_defineProperty(Message,"$messagesList",void 0),window.addEventListener("load",(function(){Message.messagesListElement.addEventListener("mousedown",(function(e){var t=e.target,n=Message.getMessage(t);if(n&&!n.removing){var r=t.currentStyle||getComputedStyle(t),s=r.transition;t.style.transition="all 0s",n.grabbing=!0;var i=t.getBoundingClientRect(),o=i.right-e.clientX-parseInt(r.right),a=function(e){var n=-(e.clientX-i.right+o);t.style.right=n<0?"".concat(n,"px"):"0px"};document.addEventListener("mousemove",a);var l=document.onmouseup;document.onmouseup=function(){document.removeEventListener("mousemove",a),document.onmouseup=l,n.grabbing=!1,t.style.transition=s,n.removing||(-parseInt(t.style.right)>t.offsetWidth/3?Message.remove(n):t.style.right="0px")}}}))}));